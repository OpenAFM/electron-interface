<dom-module id="my-afm">
  <style>
  </style>

  <template>
    <h2 class="paper-font-display2">Graph</h2>
    <div style="width: 100%; overflow: hidden;">
      <div style="width: 80%; float: left;">
        <div id="graph-container"></div>
      </div>
      <div style="float: right;">
        <template is="dom-repeat" items="{{sessions}}" id="sessionList">
          <div>{{item.name}}</div>
        </template>
      </div>
    </div>


  </template>

  <script>
    var sessionManager = require('./js/session_manager.js');
    (function() {
      Polymer({
        is: 'my-graph',
        properties: { },
        ready: function() {
          this.sessions = [];
          drawGraph();
          var that = this;
          (function loop() {
            setTimeout(function () {
              if (sessionManager.sessions.length !== that.sessions.length) {

                that.sessions.forEach(function(uiSession) {
                  var existsInUpdated = sessionManager.sessions.filter(function(y) { return y.id == uiSession.id; })[0];
                  if (!existsInUpdated) {
                    // doesn't exist in updated so remove from UI (file was removed from disk).
                    that.pop('sessions', uiSession);
                  }
                });

                sessionManager.sessions.forEach(function(updatedSession) {
                  var existsInUi = that.sessions.filter(function(y) { return y.id == updatedSession.id; })[0];
                  if (!existsInUi) {
                    // doesn't exist in ui so add to UI (file was recently added to disk).
                    that.push('sessions', updatedSession);
                  }
                });

              }
              loop()
            }, 1000);
          }());
        }
      });
    })();

    function drawGraph() {
    };
 </script>

</dom-module>
  

